<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IPQI — Systematic Algorithmic Trading</title>
<meta name="description" content="IPQI — Systematic, rules-based trading across FX and commodities. Institutional rigour. Absolute risk control. Human authority.">
<link rel="icon" type="image/png" href="IPQI_Logo_300x300.png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600&family=JetBrains+Mono:wght@300;400&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
:root {
  --bg:#0a0b0f; --bg-card:#12131a; --border:#1e2030; --border-accent:#2a3050;
  --text:#c8cad4; --text-dim:#6b7094; --text-bright:#e8eaf0;
  --accent:#4a7cff; --green:#34d399; --green-dim:rgba(52,211,153,0.08);
  --amber:#f59e0b; --red:#ef4444; --cyan:#22d3ee; --violet:#a78bfa;
  --mono:'JetBrains Mono',monospace; --sans:'DM Sans',-apple-system,sans-serif;
}
html { scroll-behavior:smooth; }
body { font-family:var(--sans); background:var(--bg); color:var(--text); line-height:1.6; -webkit-font-smoothing:antialiased; overflow-x:hidden; }
body::before { content:''; position:fixed; inset:0; background-image:linear-gradient(rgba(74,124,255,0.012) 1px,transparent 1px),linear-gradient(90deg,rgba(74,124,255,0.012) 1px,transparent 1px); background-size:64px 64px; pointer-events:none; z-index:0; }
.container { max-width:840px; margin:0 auto; padding:0 24px; position:relative; z-index:1; }

/* NAV */
nav { padding:24px 0; border-bottom:1px solid var(--border); }
nav .container { display:flex; justify-content:space-between; align-items:center; }
.logo { display:flex; align-items:center; gap:11px; text-decoration:none; }
.logo-text { font-family:var(--mono); font-size:17px; color:var(--text-bright); letter-spacing:3px; }
.logo-text span { color:var(--accent); }
.nav-links { display:flex; align-items:center; gap:22px; }
.nav-links a { font-family:var(--mono); font-size:11px; color:var(--text-dim); letter-spacing:1px; text-transform:uppercase; text-decoration:none; transition:color 0.2s; }
.nav-links a:hover { color:var(--text-bright); }

/* HERO */
.hero { padding:72px 0 48px; }
.hero-inner { display:grid; grid-template-columns:1fr auto; gap:48px; align-items:start; }
.hero-eyebrow { font-family:var(--mono); font-size:11px; color:var(--accent); letter-spacing:2px; text-transform:uppercase; margin-bottom:18px; display:flex; align-items:center; gap:10px; }
.hero-eyebrow::before { content:''; width:20px; height:1px; background:var(--accent); }
.hero h1 { font-size:clamp(26px,3.8vw,40px); font-weight:300; color:var(--text-bright); line-height:1.2; margin-bottom:8px; letter-spacing:-0.5px; }
.hero h1 strong { font-weight:600; }
.hero-sub { font-family:var(--mono); font-size:12px; color:var(--text-dim); margin-bottom:22px; line-height:1.7; max-width:520px; }
.hero-thesis { font-size:13px; color:var(--text-dim); border-left:2px solid var(--accent); padding-left:14px; margin-bottom:22px; line-height:1.75; max-width:500px; }
.hero-bio { font-size:14px; color:var(--text-dim); line-height:1.8; margin-bottom:26px; max-width:490px; }
.hero-bio strong { color:var(--text); }
.status-bar { display:inline-flex; align-items:center; gap:8px; background:var(--green-dim); border:1px solid rgba(52,211,153,0.15); border-radius:100px; padding:7px 14px; }
.status-dot { width:6px; height:6px; background:var(--green); border-radius:50%; animation:pulse 2s ease-in-out infinite; }
@keyframes pulse { 0%,100%{opacity:1;box-shadow:0 0 4px var(--green),0 0 10px var(--green);}50%{opacity:0.3;box-shadow:0 0 2px var(--green);} }
.status-text { font-family:var(--mono); font-size:11px; color:var(--green); letter-spacing:0.5px; }
.hero-canvas-wrap { display:flex; flex-direction:column; align-items:center; gap:8px; flex-shrink:0; padding-top:6px; }
.hero-canvas-label { font-family:var(--mono); font-size:9px; color:var(--text-dim); letter-spacing:2px; text-transform:uppercase; }

/* TICKER */
.ticker-wrap { overflow:hidden; border-top:1px solid var(--border); border-bottom:1px solid var(--border); padding:12px 0; margin:40px 0 0; background:var(--bg-card); }
.ticker-track { display:flex; width:max-content; animation:ticker 50s linear infinite; }
.ticker-track:hover { animation-play-state:paused; }
@keyframes ticker { from{transform:translateX(0);}to{transform:translateX(-50%);} }
.ticker-item { display:flex; align-items:center; }
.t { font-family:var(--mono); font-size:11px; color:var(--text-dim); letter-spacing:1.5px; text-transform:uppercase; padding:0 26px; white-space:nowrap; }
.t.a { color:var(--accent); } .t.g { color:var(--green); } .t.am { color:var(--amber); } .t.v { color:var(--violet); }
.tdot { width:3px; height:3px; border-radius:50%; background:var(--border-accent); flex-shrink:0; }

/* SECTION BASE */
section { padding:56px 0; }
.sec-label { font-family:var(--mono); font-size:11px; color:var(--accent); letter-spacing:2px; text-transform:uppercase; margin-bottom:12px; }
section h2 { font-size:24px; font-weight:400; color:var(--text-bright); margin-bottom:12px; letter-spacing:-0.3px; }
section h2 strong { font-weight:600; }
.sec-intro { color:var(--text-dim); font-size:14px; max-width:540px; margin-bottom:32px; line-height:1.75; }

/* DIVIDER */
.sec-rule { border:none; border-top:1px solid var(--border); margin:0; }

/* DIAGRAM */
.diagram-wrap { margin-top:28px; background:var(--bg-card); border:1px solid var(--border); border-radius:10px; overflow:hidden; position:relative; }
.diagram-wrap::before { content:''; position:absolute; top:0; left:0; right:0; height:2px; background:linear-gradient(90deg,var(--accent),var(--amber),var(--green)); opacity:0.35; z-index:2; }
#archDiagram { width:100%; height:auto; display:block; }

/* RISK GRID */
.risk-grid { display:grid; grid-template-columns:1fr 1fr; gap:16px; margin-top:28px; }
.risk-block { background:var(--bg-card); border:1px solid var(--border); border-radius:8px; padding:24px 20px; }
.rb-label { font-family:var(--mono); font-size:10px; letter-spacing:2px; text-transform:uppercase; margin-bottom:16px; }
.rb-label.g { color:var(--green); } .rb-label.r { color:var(--red); }
.rb-list { list-style:none; }
.rb-list li { font-size:13px; color:var(--text-dim); padding:8px 0; border-bottom:1px solid var(--border); display:flex; gap:10px; align-items:flex-start; line-height:1.5; }
.rb-list li:last-child { border-bottom:none; }
.rb-list li::before { content:''; width:4px; height:4px; border-radius:50%; flex-shrink:0; margin-top:7px; }
.rb-list.do li::before { background:var(--green); }
.rb-list.dont li::before { background:var(--red); opacity:0.6; }
.rb-list li strong { color:var(--text); }

/* CONSTRAINTS BLOCK */
.constraints { margin-top:16px; background:var(--bg-card); border:1px solid var(--border-accent); border-radius:8px; overflow:hidden; }
.constraints-header { padding:16px 20px; border-bottom:1px solid var(--border); display:flex; align-items:center; gap:10px; }
.constraints-header span { font-family:var(--mono); font-size:11px; color:var(--violet); letter-spacing:2px; text-transform:uppercase; }
.constraints-body { display:grid; grid-template-columns:1fr 1fr; }
.cb-item { padding:16px 20px; border-bottom:1px solid var(--border); border-right:1px solid var(--border); }
.cb-item:nth-child(2n) { border-right:none; }
.cb-item:nth-last-child(-n+2) { border-bottom:none; }
.cb-val { font-family:var(--mono); font-size:16px; font-weight:400; color:var(--text-bright); margin-bottom:3px; }
.cb-label { font-family:var(--mono); font-size:10px; color:var(--text-dim); letter-spacing:1px; text-transform:uppercase; }
.cb-note { font-size:11px; color:var(--text-dim); margin-top:2px; }

/* METRICS */
.metrics-block { margin-top:16px; background:var(--bg-card); border:1px solid var(--border); border-radius:8px; overflow:hidden; }
.metrics-header { padding:16px 20px; border-bottom:1px solid var(--border); display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap; gap:10px; }
.metrics-header h3 { font-size:14px; font-weight:500; color:var(--text-bright); }
.tag { font-family:var(--mono); font-size:10px; color:var(--amber); letter-spacing:1.5px; text-transform:uppercase; background:rgba(245,158,11,0.07); border:1px solid rgba(245,158,11,0.18); border-radius:4px; padding:3px 9px; }
.metrics-row { display:grid; grid-template-columns:1fr 1fr; }
.m-cell { padding:20px 24px; border-right:1px solid var(--border); text-align:center; }
.m-cell:last-child { border-right:none; }
.m-val { font-family:var(--mono); font-size:32px; font-weight:400; color:var(--green); letter-spacing:-1px; margin-bottom:4px; }
.m-val.blue { color:var(--accent); }
.m-key { font-family:var(--mono); font-size:10px; color:var(--text-dim); letter-spacing:1.5px; text-transform:uppercase; margin-bottom:2px; }
.m-sub { font-size:11px; color:var(--text-dim); }
.metrics-note { padding:13px 20px; border-top:1px solid var(--border); background:rgba(0,0,0,0.18); font-size:12px; color:var(--text-dim); line-height:1.7; }

/* ABOUT */
.about-row { display:grid; grid-template-columns:160px 1fr; background:var(--bg-card); border:1px solid var(--border); border-radius:8px; overflow:hidden; margin-bottom:16px; }
.about-visual { display:flex; flex-direction:column; align-items:center; justify-content:center; padding:32px 16px; border-right:1px solid var(--border); background:linear-gradient(180deg,#0c0d14,#08090c); }
.about-visual-lbl { font-family:var(--mono); font-size:8.5px; color:var(--text-dim); letter-spacing:2px; text-transform:uppercase; margin-top:10px; text-align:center; }
.about-content { padding:28px; }
.about-content h3 { font-size:16px; font-weight:500; color:var(--text-bright); margin-bottom:12px; }
.about-content p { font-size:13px; color:var(--text-dim); line-height:1.85; margin-bottom:10px; }
.about-content p:last-child { margin-bottom:0; }
.about-content strong { color:var(--text); }

/* INSIGHTS */
.insights-block { background:var(--bg-card); border:1px solid var(--border-accent); border-radius:8px; padding:36px 32px; display:grid; grid-template-columns:1fr 340px; gap:40px; align-items:center; position:relative; overflow:hidden; }
.insights-block::before { content:''; position:absolute; top:0; left:0; right:0; height:2px; background:linear-gradient(90deg,var(--accent),var(--violet)); opacity:0.45; }
.insights-block h3 { font-size:19px; font-weight:400; color:var(--text-bright); margin-bottom:10px; }
.insights-block h3 strong { font-weight:600; }
.insights-block p { font-size:13px; color:var(--text-dim); line-height:1.75; }
.signup-form { display:flex; flex-direction:column; gap:10px; }
.signup-form label { font-family:var(--mono); font-size:10px; color:var(--text-dim); letter-spacing:1.5px; text-transform:uppercase; }
.signup-form input { font-family:var(--sans); font-size:14px; color:var(--text-bright); background:var(--bg); border:1px solid var(--border); border-radius:6px; padding:11px 13px; outline:none; transition:border-color 0.3s; }
.signup-form input:focus { border-color:var(--accent); }
.signup-form input::placeholder { color:var(--text-dim); }
.signup-btn { font-family:var(--mono); font-size:11px; letter-spacing:1.5px; color:var(--bg); background:var(--accent); border:none; border-radius:6px; padding:12px 18px; cursor:pointer; transition:opacity 0.2s; text-transform:uppercase; }
.signup-btn:hover { opacity:0.85; }
.signup-note { font-size:11px; color:var(--text-dim); }
.signup-success { display:none; text-align:center; padding:20px; }
.signup-success.show { display:block; }
.signup-success p { font-size:14px; color:var(--green); margin-bottom:4px; }
.signup-success span { font-size:12px; color:var(--text-dim); }

/* CONTACT */
.contact-grid { display:grid; grid-template-columns:1fr 1fr; gap:40px; margin-top:32px; }
.contact-info p { font-size:13px; color:var(--text-dim); line-height:1.8; margin-bottom:14px; }
.contact-info p:last-child { margin-bottom:0; font-style:italic; font-size:12px; }
.contact-form { display:flex; flex-direction:column; gap:14px; }
.fg { display:flex; flex-direction:column; gap:5px; }
.fg label { font-size:11px; font-family:var(--mono); color:var(--text-dim); letter-spacing:1px; text-transform:uppercase; }
.fg input,.fg select,.fg textarea { font-family:var(--sans); font-size:14px; color:var(--text-bright); background:var(--bg); border:1px solid var(--border); border-radius:6px; padding:11px 13px; outline:none; transition:border-color 0.3s; }
.fg input:focus,.fg select:focus,.fg textarea:focus { border-color:var(--accent); }
.fg select { cursor:pointer; } .fg select option { background:var(--bg-card); }
.fg textarea { resize:vertical; min-height:72px; }
.submit-btn { font-family:var(--mono); font-size:11px; letter-spacing:1px; color:var(--bg); background:var(--accent); border:none; border-radius:6px; padding:13px 22px; cursor:pointer; transition:opacity 0.3s; text-transform:uppercase; }
.submit-btn:hover { opacity:0.85; }
.form-success { display:none; text-align:center; padding:36px 16px; }
.form-success.show { display:block; }
.form-success p { font-size:15px; color:var(--green); margin-bottom:6px; }
.form-success span { font-size:13px; color:var(--text-dim); }

/* FOOTER */
footer { border-top:1px solid var(--border); padding:32px 0; }
footer .container { display:flex; flex-direction:column; align-items:center; gap:12px; text-align:center; }
.footer-links { display:flex; gap:18px; }
.footer-links a { font-family:var(--mono); font-size:10px; color:var(--text-dim); text-decoration:none; letter-spacing:1px; text-transform:uppercase; transition:color 0.2s; }
.footer-links a:hover { color:var(--accent); }
.footer-co { font-family:var(--mono); font-size:10px; color:var(--text-dim); }
.footer-disc { max-width:600px; font-size:11.5px; color:#4e5068; line-height:1.6; }

/* FADE */
.fi { opacity:0; transform:translateY(12px); animation:fup 0.55s ease forwards; }
.fi:nth-child(2){animation-delay:.08s;} .fi:nth-child(3){animation-delay:.16s;} .fi:nth-child(4){animation-delay:.24s;}
@keyframes fup{to{opacity:1;transform:translateY(0);}}

@media(max-width:680px){
  .hero-inner,.risk-grid,.constraints-body,.metrics-row,.about-row,.insights-block,.contact-grid{grid-template-columns:1fr;}
  .hero-canvas-wrap{display:none;} .about-visual{border-right:none;border-bottom:1px solid var(--border);padding:20px;}
  .m-cell{border-right:none;border-bottom:1px solid var(--border);} .m-cell:last-child{border-bottom:none;}
  .cb-item{border-right:none;} .cb-item:nth-last-child(-n+2){border-bottom:1px solid var(--border);} .cb-item:last-child{border-bottom:none;}
  .insights-block{padding:24px 20px;} .about-content{padding:20px;}
}
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <div class="container">
    <a href="/" class="logo">
      <canvas id="navLogo" width="40" height="40"></canvas>
      <span class="logo-text">IPQI<span>.</span></span>
    </a>
    <div class="nav-links">
      <a href="#approach">Approach</a>
      <a href="#risk">Risk</a>
      <a href="#about">About</a>
      <a href="#follow">Insights</a>
      <a href="#contact">Contact</a>
    </div>
  </div>
</nav>

<!-- HERO -->
<header class="hero">
  <div class="container">
    <div class="hero-inner">
      <div>
        <div class="hero-eyebrow fi">Systematic · Evidence-led · Human-controlled</div>
        <h1 class="fi"><strong>Disciplined trading.</strong><br>Engineered by experience.</h1>
        <p class="hero-thesis fi">IPQI targets structural short-term inefficiencies and regime transitions in liquid FX and commodity markets using diversified, non-correlated strategies with hard risk constraints.</p>
        <p class="hero-bio fi">Ian spent some 25 years managing teams and technology relationships worth £100Ms into the world's leading financial institutions — HSBC, Reuters, Lloyds — on behalf of Sun Microsystems, Cisco, Oracle, and ServiceNow (and a few start-ups..). <strong>Human authority sits above every automated layer. Always.</strong></p>
        <div class="status-bar fi">
          <div class="status-dot"></div>
          <span class="status-text">Systems operational — validation phase · proprietary capital only</span>
        </div>
      </div>
      <div class="hero-canvas-wrap fi">
        <canvas id="heroLogo" width="110" height="110"></canvas>
        <div class="hero-canvas-label">Piece DNA from d4</div>
      </div>
    </div>
    <!-- TICKER -->
    <div class="ticker-wrap">
      <div class="ticker-track" id="tickerTrack"></div>
    </div>
  </div>
</header>

<hr class="sec-rule">

<!-- HOW IT WORKS -->
<section id="approach">
  <div class="container">
    <div class="sec-label">How it works</div>
    <h2>The <strong>approach</strong></h2>
    <p class="sec-intro">AI researches. Deterministic systems trade. Independent safety layers protect capital. A human director retains final authority.</p>
    <div class="diagram-wrap">
      <svg id="archDiagram" viewBox="0 0 860 680" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <filter id="gblu"><feGaussianBlur stdDeviation="5" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
          <filter id="gamb"><feGaussianBlur stdDeviation="5" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
          <filter id="gred"><feGaussianBlur stdDeviation="4" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
          <filter id="gpur"><feGaussianBlur stdDeviation="6" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
          <marker id="ab" viewBox="0 0 12 12" refX="11" refY="6" markerWidth="9" markerHeight="9" orient="auto"><path d="M1,2 L11,6 L1,10" fill="none" stroke="#4a7cff" stroke-width="2"/></marker>
          <marker id="aa" viewBox="0 0 12 12" refX="11" refY="6" markerWidth="9" markerHeight="9" orient="auto"><path d="M1,2 L11,6 L1,10" fill="none" stroke="#f59e0b" stroke-width="2"/></marker>
        </defs>
        <!-- HUMAN AUTHORITY BAR -->
        <rect x="50" y="14" width="766" height="66" rx="9" fill="#0e0f15" stroke="rgba(167,139,250,0.28)" stroke-width="1"/>
        <rect x="50" y="14" width="766" height="2.5" rx="1.5" fill="#a78bfa" opacity="0.55"/>
        <g transform="translate(433,34)">
          <path fill="none" stroke="#a78bfa" stroke-width="1.2" opacity="0.65"><animate attributeName="d" values="M-28,0 Q-22,-7 -16,-7 Q-10,-7 -4,0 Q-10,7 -16,7 Q-22,7 -28,0 Z;M-28,0 Q-22,-7 -16,-7 Q-10,-7 -4,0 Q-10,7 -16,7 Q-22,7 -28,0 Z;M-28,0 Q-22,-1 -16,-1 Q-10,-1 -4,0 Q-10,1 -16,1 Q-22,1 -28,0 Z;M-28,0 Q-22,-7 -16,-7 Q-10,-7 -4,0 Q-10,7 -16,7 Q-22,7 -28,0 Z" keyTimes="0;0.90;0.94;1" dur="5s" repeatCount="indefinite"/></path>
          <circle cx="-16" cy="0" r="3" fill="none" stroke="#a78bfa" stroke-width="1" opacity="0.5"><animate attributeName="opacity" values="0.5;0.5;0;0.5" keyTimes="0;0.90;0.94;1" dur="5s" repeatCount="indefinite"/></circle>
          <circle cx="-16" cy="0" r="1.4" fill="#a78bfa" opacity="0.55"><animate attributeName="opacity" values="0.55;0.55;0;0.55" keyTimes="0;0.90;0.94;1" dur="5s" repeatCount="indefinite"/></circle>
          <path fill="none" stroke="#a78bfa" stroke-width="1.2" opacity="0.65"><animate attributeName="d" values="M4,0 Q10,-7 16,-7 Q22,-7 28,0 Q22,7 16,7 Q10,7 4,0 Z;M4,0 Q10,-7 16,-7 Q22,-7 28,0 Q22,7 16,7 Q10,7 4,0 Z;M4,0 Q10,-1 16,-1 Q22,-1 28,0 Q22,1 16,1 Q10,1 4,0 Z;M4,0 Q10,-7 16,-7 Q22,-7 28,0 Q22,7 16,7 Q10,7 4,0 Z" keyTimes="0;0.90;0.94;1" dur="5s" repeatCount="indefinite" begin="0.08s"/></path>
          <circle cx="16" cy="0" r="3" fill="none" stroke="#a78bfa" stroke-width="1" opacity="0.5"><animate attributeName="opacity" values="0.5;0.5;0;0.5" keyTimes="0;0.90;0.94;1" dur="5s" repeatCount="indefinite" begin="0.08s"/></circle>
          <circle cx="16" cy="0" r="1.4" fill="#a78bfa" opacity="0.55"><animate attributeName="opacity" values="0.55;0.55;0;0.55" keyTimes="0;0.90;0.94;1" dur="5s" repeatCount="indefinite" begin="0.08s"/></circle>
        </g>
        <text x="433" y="56" font-family="JetBrains Mono,monospace" font-size="11.5" fill="#a78bfa" letter-spacing="2.5" font-weight="500" text-anchor="middle">HUMAN AUTHORITY — FINAL DECISION ON ALL STRATEGY, RISK, AND DEPLOYMENT</text>
        <circle cx="772" cy="47" r="4.5" fill="#a78bfa" opacity="0.12"><animate attributeName="r" values="3.5;6.5;3.5" dur="2s" repeatCount="indefinite"/><animate attributeName="opacity" values="0.12;0.3;0.12" dur="2s" repeatCount="indefinite"/></circle>
        <circle cx="772" cy="47" r="2.5" fill="#a78bfa" opacity="0.45"/>
        <!-- Auth connectors -->
        <line x1="165" y1="80" x2="165" y2="106" stroke="#a78bfa" stroke-width="1" opacity="0.18" stroke-dasharray="4,4"/>
        <line x1="433" y1="80" x2="433" y2="106" stroke="#a78bfa" stroke-width="1" opacity="0.18" stroke-dasharray="4,4"/>
        <line x1="701" y1="80" x2="701" y2="106" stroke="#a78bfa" stroke-width="1" opacity="0.18" stroke-dasharray="4,4"/>
        <circle r="3" fill="#a78bfa" filter="url(#gpur)" opacity="0"><animate attributeName="cy" values="82;104" dur="3s" repeatCount="indefinite"/><animate attributeName="cx" values="165;165" dur="3s" repeatCount="indefinite"/><animate attributeName="opacity" values="0;0.45;0.45;0" dur="3s" repeatCount="indefinite"/></circle>
        <circle r="3" fill="#a78bfa" filter="url(#gpur)" opacity="0"><animate attributeName="cy" values="82;104" dur="3s" repeatCount="indefinite" begin="1s"/><animate attributeName="cx" values="433;433" dur="3s" repeatCount="indefinite" begin="1s"/><animate attributeName="opacity" values="0;0.45;0.45;0" dur="3s" repeatCount="indefinite" begin="1s"/></circle>
        <circle r="3" fill="#a78bfa" filter="url(#gpur)" opacity="0"><animate attributeName="cy" values="82;104" dur="3s" repeatCount="indefinite" begin="2s"/><animate attributeName="cx" values="701;701" dur="3s" repeatCount="indefinite" begin="2s"/><animate attributeName="opacity" values="0;0.45;0.45;0" dur="3s" repeatCount="indefinite" begin="2s"/></circle>
        <!-- NODE 1 RESEARCH -->
        <rect x="50" y="108" width="230" height="218" rx="9" fill="#0e0f15" stroke="#1e2030" stroke-width="1"/>
        <rect x="50" y="108" width="230" height="2.5" rx="1.5" fill="#4a7cff" opacity="0.65"/>
        <text x="165" y="143" font-family="JetBrains Mono,monospace" font-size="11" fill="#4a7cff" letter-spacing="2.5" font-weight="500" text-anchor="middle">01 — RESEARCH</text>
        <circle cx="165" cy="188" r="20" fill="none" stroke="#4a7cff" stroke-width="0.7" opacity="0.25"/><circle cx="165" cy="188" r="11" fill="none" stroke="#4a7cff" stroke-width="0.9" opacity="0.45"/><circle cx="165" cy="188" r="3.5" fill="#4a7cff" opacity="0.55"/>
        <line x1="149" y1="182" x2="181" y2="182" stroke="#4a7cff" stroke-width="0.5" opacity="0.2"/><line x1="149" y1="188" x2="181" y2="188" stroke="#4a7cff" stroke-width="0.5" opacity="0.3"/><line x1="149" y1="194" x2="181" y2="194" stroke="#4a7cff" stroke-width="0.5" opacity="0.2"/>
        <text x="165" y="232" font-family="DM Sans,sans-serif" font-size="16" fill="#e8eaf0" text-anchor="middle" font-weight="600">AI Strategy Design</text>
        <text x="165" y="254" font-family="DM Sans,sans-serif" font-size="12" fill="#6b7094" text-anchor="middle">Hypothesis generation,</text>
        <text x="165" y="270" font-family="DM Sans,sans-serif" font-size="12" fill="#6b7094" text-anchor="middle">backtesting, stress-testing.</text>
        <!-- Arrow 1→2 -->
        <line x1="280" y1="217" x2="310" y2="217" stroke="#4a7cff" stroke-width="1.8" opacity="0.4" marker-end="url(#ab)"/>
        <circle r="3.5" fill="#4a7cff" filter="url(#gblu)"><animate attributeName="cx" values="284;307" dur="1.6s" repeatCount="indefinite"/><animate attributeName="cy" values="217;217" dur="1.6s" repeatCount="indefinite"/><animate attributeName="opacity" values="0;0.8;0.8;0" dur="1.6s" repeatCount="indefinite"/></circle>
        <!-- NODE 2 CLASSIFY -->
        <rect x="318" y="108" width="230" height="218" rx="9" fill="#0e0f15" stroke="#1e2030" stroke-width="1"/>
        <rect x="318" y="108" width="230" height="2.5" rx="1.5" fill="#f59e0b" opacity="0.65"/>
        <text x="433" y="143" font-family="JetBrains Mono,monospace" font-size="11" fill="#f59e0b" letter-spacing="2.5" font-weight="500" text-anchor="middle">02 — CLASSIFY</text>
        <circle cx="433" cy="188" r="20" fill="none" stroke="#f59e0b" stroke-width="0.7" opacity="0.25"/>
        <rect x="415" y="183" width="6" height="14" rx="1.5" fill="#f59e0b" opacity="0.3"/><rect x="425" y="174" width="6" height="24" rx="1.5" fill="#f59e0b" opacity="0.5"/><rect x="435" y="179" width="6" height="19" rx="1.5" fill="#f59e0b" opacity="0.65"/><rect x="445" y="177" width="6" height="21" rx="1.5" fill="#f59e0b" opacity="0.4"/>
        <text x="433" y="232" font-family="DM Sans,sans-serif" font-size="16" fill="#e8eaf0" text-anchor="middle" font-weight="600">Regime Detection</text>
        <text x="433" y="254" font-family="DM Sans,sans-serif" font-size="12" fill="#6b7094" text-anchor="middle">Trending, ranging, volatile.</text>
        <text x="433" y="270" font-family="DM Sans,sans-serif" font-size="12" fill="#6b7094" text-anchor="middle">Right strategy, right conditions.</text>
        <!-- Arrow 2→3 -->
        <line x1="548" y1="217" x2="578" y2="217" stroke="#f59e0b" stroke-width="1.8" opacity="0.4" marker-end="url(#aa)"/>
        <circle r="3.5" fill="#f59e0b" filter="url(#gamb)"><animate attributeName="cx" values="552;575" dur="1.6s" repeatCount="indefinite" begin="0.5s"/><animate attributeName="cy" values="217;217" dur="1.6s" repeatCount="indefinite" begin="0.5s"/><animate attributeName="opacity" values="0;0.8;0.8;0" dur="1.6s" repeatCount="indefinite" begin="0.5s"/></circle>
        <!-- NODE 3 EXECUTE -->
        <rect x="586" y="108" width="230" height="218" rx="9" fill="#0e0f15" stroke="#1e2030" stroke-width="1"/>
        <rect x="586" y="108" width="230" height="2.5" rx="1.5" fill="#34d399" opacity="0.65"/>
        <text x="701" y="143" font-family="JetBrains Mono,monospace" font-size="11" fill="#34d399" letter-spacing="2.5" font-weight="500" text-anchor="middle">03 — EXECUTE</text>
        <circle cx="701" cy="188" r="20" fill="none" stroke="#34d399" stroke-width="0.7" opacity="0.25"/>
        <path d="M695,172 L706,172 L701,184 L710,184 L692,206 L697,191 L688,191 Z" fill="#34d399" opacity="0.5"/>
        <text x="701" y="232" font-family="DM Sans,sans-serif" font-size="16" fill="#e8eaf0" text-anchor="middle" font-weight="600">Algo Execution</text>
        <text x="701" y="254" font-family="DM Sans,sans-serif" font-size="12" fill="#6b7094" text-anchor="middle">Deterministic logic. Direct</text>
        <text x="701" y="270" font-family="DM Sans,sans-serif" font-size="12" fill="#6b7094" text-anchor="middle">to regulated broker.</text>
        <!-- Risk connectors -->
        <line x1="165" y1="326" x2="165" y2="390" stroke="#ef4444" stroke-width="1.3" opacity="0.25"/><line x1="433" y1="326" x2="433" y2="390" stroke="#ef4444" stroke-width="1.3" opacity="0.25"/><line x1="701" y1="326" x2="701" y2="390" stroke="#ef4444" stroke-width="1.3" opacity="0.25"/>
        <circle r="3.5" fill="#ef4444" filter="url(#gred)" opacity="0"><animate attributeName="cy" values="328;388" dur="2.2s" repeatCount="indefinite"/><animate attributeName="cx" values="165;165" dur="2.2s" repeatCount="indefinite"/><animate attributeName="opacity" values="0;0.6;0.6;0" dur="2.2s" repeatCount="indefinite"/></circle>
        <circle r="3.5" fill="#ef4444" filter="url(#gred)" opacity="0"><animate attributeName="cy" values="328;388" dur="2.2s" repeatCount="indefinite" begin="0.7s"/><animate attributeName="cx" values="433;433" dur="2.2s" repeatCount="indefinite" begin="0.7s"/><animate attributeName="opacity" values="0;0.6;0.6;0" dur="2.2s" repeatCount="indefinite" begin="0.7s"/></circle>
        <circle r="3.5" fill="#ef4444" filter="url(#gred)" opacity="0"><animate attributeName="cy" values="328;388" dur="2.2s" repeatCount="indefinite" begin="1.4s"/><animate attributeName="cx" values="701;701" dur="2.2s" repeatCount="indefinite" begin="1.4s"/><animate attributeName="opacity" values="0;0.6;0.6;0" dur="2.2s" repeatCount="indefinite" begin="1.4s"/></circle>
        <!-- RISK LAYER -->
        <rect x="50" y="392" width="766" height="96" rx="9" fill="#0e0f15" stroke="rgba(239,68,68,0.22)" stroke-width="1"/>
        <rect x="50" y="392" width="766" height="2.5" rx="1.5" fill="#ef4444" opacity="0.4"/>
        <g transform="translate(433,418)" opacity="0.6"><path d="M0,-12 L10,-6 L10,4 C10,10 0,16 0,16 C0,16 -10,10 -10,4 L-10,-6 Z" fill="none" stroke="#ef4444" stroke-width="1.4"/><path d="M0,-6 L5,-3 L5,2 C5,5 0,8 0,8 C0,8 -5,5 -5,2 L-5,-3 Z" fill="#ef4444" opacity="0.2"/></g>
        <text x="433" y="448" font-family="JetBrains Mono,monospace" font-size="11.5" fill="#ef4444" letter-spacing="2.5" font-weight="500" text-anchor="middle" opacity="0.85">AUTONOMOUS RISK MANAGEMENT — THREE INDEPENDENT LAYERS</text>
        <text x="433" y="470" font-family="DM Sans,sans-serif" font-size="13" fill="#8a8da0" text-anchor="middle">Circuit breakers monitor exposure and drawdown continuously. Capital protection is the primary function.</text>
        <!-- Detail row -->
        <line x1="50" y1="552" x2="816" y2="552" stroke="#1e2030" stroke-width="0.6"/>
        <text x="165" y="582" font-family="JetBrains Mono,monospace" font-size="10.5" fill="#4a7cff" letter-spacing="1.5" font-weight="500" text-anchor="middle">DETERMINISTIC LOGIC</text>
        <text x="165" y="602" font-family="DM Sans,sans-serif" font-size="12.5" fill="#6b7094" text-anchor="middle">Every trade follows explicit,</text>
        <text x="165" y="618" font-family="DM Sans,sans-serif" font-size="12.5" fill="#6b7094" text-anchor="middle">auditable rules.</text>
        <line x1="306" y1="566" x2="306" y2="650" stroke="#1e2030" stroke-width="0.5"/>
        <text x="433" y="582" font-family="JetBrains Mono,monospace" font-size="10.5" fill="#f59e0b" letter-spacing="1.5" font-weight="500" text-anchor="middle">REGIME ADAPTIVE</text>
        <text x="433" y="602" font-family="DM Sans,sans-serif" font-size="12.5" fill="#6b7094" text-anchor="middle">Strategies only active in the</text>
        <text x="433" y="618" font-family="DM Sans,sans-serif" font-size="12.5" fill="#6b7094" text-anchor="middle">conditions built for.</text>
        <line x1="560" y1="566" x2="560" y2="650" stroke="#1e2030" stroke-width="0.5"/>
        <text x="701" y="582" font-family="JetBrains Mono,monospace" font-size="10.5" fill="#34d399" letter-spacing="1.5" font-weight="500" text-anchor="middle">DIVERSIFIED BY DESIGN</text>
        <text x="701" y="602" font-family="DM Sans,sans-serif" font-size="12.5" fill="#6b7094" text-anchor="middle">Different strategies, sessions,</text>
        <text x="701" y="618" font-family="DM Sans,sans-serif" font-size="12.5" fill="#6b7094" text-anchor="middle">instruments running in parallel.</text>
        <rect x="0" y="658" width="1" height="22" fill="transparent"/>
      </svg>
    </div>
  </div>
</section>

<hr class="sec-rule">

<!-- RISK + CONSTRAINTS -->
<section id="risk">
  <div class="container">
    <div class="sec-label">Risk philosophy</div>
    <h2>Constraint <strong>before</strong> return</h2>
    <p class="sec-intro">Capital protection is the primary function. The rules below are not aspirational — they are system-enforced and cannot be overridden during live deployment.</p>

    <div class="risk-grid">
      <div class="risk-block">
        <div class="rb-label g">What we do</div>
        <ul class="rb-list do">
          <li><div><strong>Hard position limits</strong> — maximum risk per trade defined and enforced automatically</div></li>
          <li><div><strong>Tiered circuit breakers</strong> — three independent layers each capable of halting trading autonomously</div></li>
          <li><div><strong>News filters</strong> — trading pauses automatically around high-impact events</div></li>
          <li><div><strong>Statistical gating</strong> — no strategy goes live without passing a rigorous evidence threshold</div></li>
          <li><div><strong>Regime awareness</strong> — strategies only activate in the conditions they were built for</div></li>
        </ul>
      </div>
      <div class="risk-block">
        <div class="rb-label r">What we never do</div>
        <ul class="rb-list dont">
          <li><div><strong>No martingale</strong> — position size never increases after a loss</div></li>
          <li><div><strong>No grid trading</strong> — no averaging down on open positions</div></li>
          <li><div><strong>No recovery mode</strong> — losses are accepted, never chased</div></li>
          <li><div><strong>No black boxes</strong> — every strategy has explicit, auditable logic</div></li>
          <li><div><strong>No parameter changes under pressure</strong> — rules defined in calm, enforced in volatility</div></li>
        </ul>
      </div>
    </div>

    <!-- OPERATING CONSTRAINTS -->
    <div class="constraints">
      <div class="constraints-header">
        <svg width="14" height="14" viewBox="0 0 16 16" fill="none"><path d="M8 1L14 4.5V11.5L8 15L2 11.5V4.5L8 1Z" stroke="#a78bfa" stroke-width="1.2" fill="rgba(167,139,250,0.08)"/><path d="M8 5L8 9" stroke="#a78bfa" stroke-width="1.5" stroke-linecap="round"/><circle cx="8" cy="11" r="0.8" fill="#a78bfa"/></svg>
        <span>Operating constraints</span>
      </div>
      <div class="constraints-body">
        <div class="cb-item">
          <div class="cb-val">0.5%</div>
          <div class="cb-label">Max risk per trade</div>
          <div class="cb-note">System-enforced, not discretionary</div>
        </div>
        <div class="cb-item">
          <div class="cb-val">4% / 8%</div>
          <div class="cb-label">Daily loss / Max drawdown</div>
          <div class="cb-note">Circuit breaker triggers full halt</div>
        </div>
        <div class="cb-item">
          <div class="cb-val">300+ trades</div>
          <div class="cb-label">Strategy promotion threshold</div>
          <div class="cb-note">Required for capital scale decisions</div>
        </div>
        <div class="cb-item">
          <div class="cb-val">Monte Carlo</div>
          <div class="cb-label">Stress-test methodology</div>
          <div class="cb-note">Applied before any deployment decision</div>
        </div>
      </div>
    </div>

    <!-- EARLY VALIDATION METRICS -->
    <div class="metrics-block">
      <div class="metrics-header">
        <h3>Early validation data</h3>
        <span class="tag">Validation phase — not a track record</span>
      </div>
      <div class="metrics-row">
        <div class="m-cell">
          <div class="m-val">2.04</div>
          <div class="m-key">Profit Factor</div>
          <div class="m-sub">Leading trend strategy</div>
        </div>
        <div class="m-cell">
          <div class="m-val blue">&gt;20</div>
          <div class="m-key">Algorithms &middot; &gt;5 desks</div>
          <div class="m-sub">In active validation</div>
        </div>
      </div>
      <div class="metrics-note">Early validation results are encouraging — our leading trend strategy has achieved a Profit Factor of 2.04. Full performance data will be published when our statistical threshold is reached. All strategies are stress-tested via Monte Carlo simulation before any capital deployment decision is made.</div>
    </div>
  </div>
</section>

<hr class="sec-rule">

<!-- ABOUT -->
<section id="about">
  <div class="container">
    <div class="sec-label">About</div>
    <h2>Every possible move. <strong>One position.</strong></h2>

    <div class="about-row">
      <div class="about-visual">
        <canvas id="aboutLogo" width="128" height="128"></canvas>
        <div class="about-visual-lbl">Piece DNA from d4</div>
      </div>
      <div class="about-content">
        <h3>Strategy runs deep</h3>
        <p>It started with writing computer games in BASIC as a child, then chess at national level. Both taught the same lesson: understand the system completely before you try to beat it — pattern recognition, consequence thinking, the discipline to play the position rather than the emotion.</p>
        <p>That ran as an undercurrent through 25 years managing high-stakes technology programmes into tier one financial institutions. In 2024 Ian began building the trading systems that became IPQI, applying the same programme-management frameworks to a new domain. The instruments are different. The fundamentals — <strong>process over intuition, evidence over conviction, rules defined in calm and followed under pressure</strong> — are identical.</p>
      </div>
    </div>
  </div>
</section>

<hr class="sec-rule">

<!-- INSIGHTS -->
<section id="follow" style="padding:56px 0;">
  <div class="container">
    <div class="sec-label">Building in public</div>
    <div class="insights-block">
      <div>
        <h3>Insights from <strong>the lab</strong></h3>
        <p>IPQI documents the process openly — engineering decisions, performance data as it accumulates, and the frameworks behind the operation. No noise. Only when there is something genuinely worth sharing.</p>
      </div>
      <div>
        <form class="signup-form" id="signupForm" action="https://formspree.io/f/mqedenny" method="POST">
          <input type="hidden" name="type" value="insights-signup">
          <label for="se">Notify me when Insights goes live</label>
          <input type="email" id="se" name="email" required placeholder="you@example.com">
          <button type="submit" class="signup-btn">Notify me</button>
          <p class="signup-note">No spam. Unsubscribe any time.</p>
        </form>
        <div class="signup-success" id="signupSuccess">
          <p>You're on the list.</p>
          <span>We'll be in touch when Insights goes live.</span>
        </div>
      </div>
    </div>
  </div>
</section>

<hr class="sec-rule">

<!-- CONTACT -->
<section id="contact" style="padding:56px 0;">
  <div class="container">
    <div class="sec-label">Contact</div>
    <h2>Get in <strong>touch</strong></h2>
    <div class="contact-grid">
      <div class="contact-info">
        <p>IPQI is in its validation phase and is not accepting external investment or managing third-party funds.</p>
        <p>If you have a substantive reason to connect — a collaboration or a technical discussion of genuine interest — we have limited bandwidth but we are happy to hear from you.</p>
        <p>Please be specific about what you are looking to discuss.</p>
      </div>
      <div>
        <form class="contact-form" id="contactForm" action="https://formspree.io/f/mqedenny" method="POST">
          <div class="fg"><label>Name</label><input type="text" name="name" required placeholder="Your name"></div>
          <div class="fg"><label>Email</label><input type="email" name="email" required placeholder="you@example.com"></div>
          <div class="fg">
            <label>Reason for contact</label>
            <select name="interest" required>
              <option value="" disabled selected>Select one</option>
              <option value="collaboration">Explore a collaboration</option>
              <option value="technical">Discuss the technical approach</option>
            </select>
          </div>
          <div class="fg"><label>Message</label><textarea name="message" required placeholder="Be specific about what you are looking to discuss."></textarea></div>
          <button type="submit" class="submit-btn">Send</button>
        </form>
        <div class="form-success" id="formSuccess">
          <p>Message received.</p>
          <span>We'll be in touch if there's a fit.</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <div class="container">
    <div class="footer-links">
      <a href="https://www.linkedin.com/in/ianpratley/" target="_blank" rel="noopener">LinkedIn</a>
      <a href="#follow">Insights</a>
      <a href="/privacy.html">Privacy</a>
    </div>
    <div class="footer-co">IPQI Ltd &nbsp;·&nbsp; No. 16998393 &nbsp;·&nbsp; Registered in England &amp; Wales &nbsp;·&nbsp; Pilgrim House, Oxford Place, Plymouth, PL1 5AJ</div>
    <div class="footer-disc">IPQI Ltd trades proprietary capital and participates in institutional prop firm programmes. It does not manage third-party funds, provide investment advice, or operate as a regulated financial services firm. Trading foreign exchange and other instruments carries a high level of risk. Past performance is not indicative of future results.</div>
  </div>
</footer>

<script>
// ── TICKER ──
const TI=[
  {t:'Engineered by experience',c:'v'},
  {t:'Institutional ECN execution',c:'a'},
  {t:'Statistical significance before deployment',c:'g'},
  {t:'Monte Carlo stress-tested',c:''},
  {t:'Multi-strategy fleet architecture',c:'am'},
  {t:'Regime-adaptive execution',c:'a'},
  {t:'Three-layer autonomous risk control',c:''},
  {t:'Human authority, always',c:'v'},
  {t:'Direct market access · FX & commodities · 24/5',c:''},
  {t:'Early validation · PF 2.04 · leading trend strategy',c:'g'},
];
(()=>{
  const tr=document.getElementById('tickerTrack');
  [0,1].forEach(()=>{TI.forEach(i=>{
    const w=document.createElement('div');w.className='ticker-item';
    const s=document.createElement('span');s.className='t'+(i.c?' '+i.c:'');s.textContent=i.t;
    const d=document.createElement('div');d.className='tdot';
    w.appendChild(s);w.appendChild(d);tr.appendChild(w);
  });});
})();

// ── CHESS PIECE DNA ──
const N=8,OR=[4,3],COL={knight:'#22d3ee',bishop:'#a78bfa',rook:'#fbbf24',queen:'#4a7cff',origin:'#e8eaf0'};
function inB(r,c){return r>=0&&r<N&&c>=0&&c<N;}
function km(){const[or,oc]=OR;return[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]].map(([dr,dc])=>[or+dr,oc+dc]).filter(([r,c])=>inB(r,c));}
function sl(dirs){const[or,oc]=OR,m=[];for(const[dr,dc]of dirs)for(let i=1;i<N;i++){const r=or+dr*i,c=oc+dc*i;if(inB(r,c))m.push([r,c]);else break;}return m;}
const bm=()=>sl([[-1,-1],[-1,1],[1,-1],[1,1]]),rm=()=>sl([[-1,0],[1,0],[0,-1],[0,1]]),qm=()=>[...bm(),...rm()];
const PC={knight:km(),bishop:bm(),rook:rm(),queen:qm()};
function cp(r,c){if(r===OR[0]&&c===OR[1])return'origin';if(PC.knight.some(([pr,pc])=>pr===r&&pc===c))return'knight';const iB=PC.bishop.some(([pr,pc])=>pr===r&&pc===c),iR=PC.rook.some(([pr,pc])=>pr===r&&pc===c);if(iB&&iR)return'queen';if(iB)return'bishop';if(iR)return'rook';return null;}
const CP=Array.from({length:N},(_,r)=>Array.from({length:N},(_,c)=>cp(r,c)));
const _s=((s)=>()=>{s=(s*16807)%2147483647;return s/2147483647;})(42);
const NOISE=Array.from({length:N},()=>Array.from({length:N},()=>0.05+_s()*0.12));
const DIM='#2a2b35';
function draw(ctx,sz,op,col){const p=sz*0.04,sp=sz-p*2,g=sp*0.035,cell=(sp-g*(N-1))/N,rad=Math.max(0.5,cell*0.1);ctx.clearRect(0,0,sz,sz);for(let r=0;r<N;r++)for(let c=0;c<N;c++){ctx.globalAlpha=op[r][c];ctx.fillStyle=col[r][c];ctx.beginPath();ctx.roundRect(p+c*(cell+g),p+r*(cell+g),cell,cell,rad);ctx.fill();}ctx.globalAlpha=1;}
function h2r(h){return[parseInt(h.slice(1,3),16),parseInt(h.slice(3,5),16),parseInt(h.slice(5,7),16)];}
function r2h(r,g,b){return'#'+[r,g,b].map(v=>Math.round(Math.max(0,Math.min(255,v))).toString(16).padStart(2,'0')).join('');}
function lC(a,b,t){const[ar,ag,ab]=h2r(a),[br,bg,bb]=h2r(b);return r2h(ar+(br-ar)*t,ag+(bg-ag)*t,ab+(bb-ab)*t);}
function anim(canvas){
  const ctx=canvas.getContext('2d'),sz=canvas.width;
  const cO=Array.from({length:N},(_,r)=>Array.from({length:N},(_,c)=>NOISE[r][c]));
  const tO=Array.from({length:N},(_,r)=>Array.from({length:N},(_,c)=>NOISE[r][c]));
  const cC=Array.from({length:N},()=>Array.from({length:N},()=>DIM));
  const tC=Array.from({length:N},()=>Array.from({length:N},()=>DIM));
  const seq=['knight','bishop','rook','queen','all'];let si=0,ph='s',ps=0,lp=0,np=150;
  const SM=3200,SX=5800,RE=240,HO=580,DI=750;let nd=SM+Math.random()*(SX-SM);
  function sN(){for(let r=0;r<N;r++)for(let c=0;c<N;c++){tO[r][c]=NOISE[r][c];tC[r][c]=DIM;}}
  function sD(){const tp=seq[si%seq.length];for(let r=0;r<N;r++)for(let c=0;c<N;c++){if(r===OR[0]&&c===OR[1]){tO[r][c]=1;tC[r][c]=COL.origin;continue;}if(tp==='all'){const p=CP[r][c];if(p&&p!=='origin'){tO[r][c]=0.9;tC[r][c]=COL[p];}else{tO[r][c]=0.015;tC[r][c]=DIM;}}else{const mv=PC[tp]||[];if(mv.some(([pr,pc])=>pr===r&&pc===c)){tO[r][c]=0.95;tC[r][c]=COL[tp];}else{tO[r][c]=0.015;tC[r][c]=DIM;}}}}
  function fr(t){if(!ps)ps=t;const el=t-ps;if(ph==='s'&&el>nd){ph='r';ps=t;sD();}else if(ph==='r'&&el>RE){ph='h';ps=t;}else if(ph==='h'&&el>HO){ph='d';ps=t;sN();}else if(ph==='d'&&el>DI){ph='s';ps=t;si++;nd=SM+Math.random()*(SX-SM);}if(ph==='s'&&t-lp>np){lp=t;np=100+Math.random()*250;for(let i=0;i<2+Math.floor(Math.random()*4);i++){const r=Math.floor(Math.random()*N),c=Math.floor(Math.random()*N);tO[r][c]=0.22+Math.random()*0.3;if(Math.random()>0.7){const p=CP[r][c];if(p&&p!=='origin')tC[r][c]=COL[p];}setTimeout(()=>{tO[r][c]=NOISE[r][c];tC[r][c]=DIM;},80+Math.random()*150);}}const os=ph==='r'?0.22:ph==='d'?0.04:0.14,cs=ph==='r'?0.18:ph==='d'?0.03:0.10;for(let r=0;r<N;r++)for(let c=0;c<N;c++){cO[r][c]+=(tO[r][c]-cO[r][c])*os;cC[r][c]=lC(cC[r][c],tC[r][c],cs);}draw(ctx,sz,cO,cC);requestAnimationFrame(fr);}
  requestAnimationFrame(fr);
}
function stat(canvas){const ctx=canvas.getContext('2d'),sz=canvas.width;const op=Array.from({length:N},()=>Array.from({length:N},()=>0));const col=Array.from({length:N},()=>Array.from({length:N},()=>DIM));for(let r=0;r<N;r++)for(let c=0;c<N;c++){const p=CP[r][c];if(p==='origin'){op[r][c]=1;col[r][c]=COL.origin;}else if(p){op[r][c]=0.85;col[r][c]=COL[p];}else{op[r][c]=0.04;col[r][c]=DIM;}}draw(ctx,sz,op,col);}
stat(document.getElementById('navLogo'));
anim(document.getElementById('heroLogo'));
anim(document.getElementById('aboutLogo'));

// ── FORMS ──
function wire(fid,sid){const f=document.getElementById(fid),s=document.getElementById(sid);f.addEventListener('submit',async e=>{e.preventDefault();try{const r=await fetch(f.action,{method:'POST',body:new FormData(f),headers:{'Accept':'application/json'}});if(r.ok){f.style.display='none';s.classList.add('show');}}catch(err){f.submit();}});}
wire('contactForm','formSuccess');
wire('signupForm','signupSuccess');
</script>
</body>
</html>
